generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model admin_notifications {
  id              BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  type            String    @db.VarChar(255)
  notifiable_type String?   @db.VarChar(255)
  notifiable_id   String?   @db.Text
  title           String    @db.VarChar(255)
  message         String    @db.Text
  data            String?   @db.LongText
  action_url      String?   @db.VarChar(255)
  is_read         Boolean   @default(false)
  read_at         DateTime? @db.Timestamp(0)
  created_at      DateTime? @db.Timestamp(0)
  updated_at      DateTime? @db.Timestamp(0)

  @@index([is_read, created_at], map: "idx_is_read_created_at")
  @@index([notifiable_type], map: "idx_notifiable")
  @@index([type], map: "idx_type")
}

model password_reset_tokens {
  email      String    @id @db.VarChar(255)
  token      String    @db.VarChar(255)
  created_at DateTime? @db.Timestamp(0)
}


model tb_alamat_pengiriman {
  id               String   @id @db.Char(36)
  user_id          String   @db.Char(36)
  label_alamat     String?  @db.VarChar(50)
  nama_penerima    String   @db.VarChar(255)
  no_telp_penerima String   @db.VarChar(13)
  alamat_lengkap   String   @db.Text
  province_id      Int
  province_name    String   @db.VarChar(255)
  city_id          Int
  city_name        String   @db.VarChar(255)
  district_id      Int?
  district_name    String?  @db.VarChar(255)
  kode_pos         String?  @db.VarChar(5)
  is_default       Boolean? @default(false)
  created_at       DateTime @default(now()) @db.Timestamp(0)
  updated_at       DateTime @default(now()) @db.Timestamp(0)
}

model tb_bookmark {
  id           BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  user_id      String    @db.Char(36)
  sparepart_id String    @db.VarChar(255)
  created_at   DateTime? @db.Timestamp(0)
  updated_at   DateTime? @db.Timestamp(0)

  @@unique([user_id, sparepart_id], map: "tb_bookmark_user_id_sparepart_id_unique")
}

model tb_carts {
  id         String    @id @db.Char(36)
  user_id    String?   @db.Char(36)
  items      String    @db.LongText
  created_at DateTime? @db.Timestamp(0)
  updated_at DateTime? @db.Timestamp(0)
}

model tb_kategori_sparepart {
  id            BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  nama_kategori String    @db.VarChar(255)
  deskripsi     String    @db.VarChar(255)
  created_at    DateTime? @db.Timestamp(0)
  updated_at    DateTime? @db.Timestamp(0)
}

model tb_reviews {
  id           BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  sparepart_id String    @db.VarChar(255)
  user_id      String    @db.VarChar(255)
  rating       Int       @db.UnsignedTinyInt
  komentar     String?   @db.Text
  created_at   DateTime? @default(now()) @db.Timestamp(0)
  updated_at   DateTime? @default(now()) @db.Timestamp(0)
}

model tb_servismotor {
  id           BigInt                     @id @default(autoincrement()) @db.UnsignedBigInt
  user_id      String                     @db.Char(36)
  no_kendaraan String                     @db.VarChar(255)
  jenis_motor  tb_servismotor_jenis_motor
  keluhan      String                     @db.Text
  status       tb_servismotor_status      @default(pending)
  harga_servis Decimal?                   @db.Decimal(15, 2)
  transaksi_id String?                    @db.VarChar(255)
  created_at   DateTime?                  @db.Timestamp(0)
  updated_at   DateTime?                  @db.Timestamp(0)
}

model tb_sparepart {
  kode_sparepart String    @id @db.VarChar(255)
  kategori_id    BigInt    @db.UnsignedBigInt
  nama_sparepart String    @db.VarChar(255)
  deskripsi      String?   @db.Text
  stok           Int       @default(0)
  harga          Decimal   @db.Decimal(12, 2)
  merk           String?   @db.VarChar(255)
  gambar_produk  String?   @db.Text
  created_at     DateTime? @db.Timestamp(0)
  updated_at     DateTime? @db.Timestamp(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tb_transaksi {
  id                String                         @id @db.Char(36)
  user_id           String                         @db.Char(36)
  tanggal_transaksi DateTime                       @default(now()) @db.DateTime(0)
  total             Decimal                        @db.Decimal(12, 2)
  metode_pembayaran String?                        @db.VarChar(255)
  status_pembayaran tb_transaksi_status_pembayaran @default(pending)
  items_data        String?                        @db.LongText
  snap_token        String?                        @db.Text
  type_pembelian    Int
  alamat_id         String?                        @db.Char(36)
  kurir             String?                        @db.VarChar(50)
  service           String?                        @db.VarChar(50)
  estimasi          String?                        @db.VarChar(50)
  ongkir            Decimal?                       @db.Decimal(12, 2)
  created_at        DateTime?                      @db.Timestamp(0)
  updated_at        DateTime?                      @db.Timestamp(0)
}

model tb_users {
  id                       String        @id @db.Char(36)
  nama                     String        @db.VarChar(255)
  email                    String        @unique(map: "tb_users_email_unique") @db.VarChar(255)
  password                 String        @db.VarChar(255)
  email_verification_token String?       @db.VarChar(255)
  email_verified_at        DateTime?     @db.Timestamp(0)
  password_reset_token     String?       @db.VarChar(255)
  password_reset_expires   DateTime?     @db.Timestamp(0)
  no_telp                  String?       @db.VarChar(13)
  role                     tb_users_role @default(customer)
  alamat                   String?       @db.VarChar(255)
  profile                  String?       @db.Text
  fcm_token                String?       @db.VarChar(255)
  phone_id                 String?       @db.Text
  remember_token           String?       @db.VarChar(100)
  created_at               DateTime?     @db.Timestamp(0)
  updated_at               DateTime?     @db.Timestamp(0)
}

enum tb_servismotor_jenis_motor {
  matic
  manual
}

enum tb_servismotor_status {
  pending
  rejected
  in_service
  done
  priced
}

enum tb_transaksi_status_pembayaran {
  pending
  berhasil
  gagal
  expired
  cancelled
}

enum tb_users_role {
  admin
  customer
}
